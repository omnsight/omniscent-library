syntax = "proto3";

package model.v1;

import "google/protobuf/struct.proto";
import "model/v1/common.proto";

option go_package = "github.com/omnsight/omniscent-library/gen/model/v1;model";

message Relation {
  // Common data
  // @gotags: json:"_id,omitempty"
  string id = 1;
  // @gotags: json:"_key,omitempty"
  string key = 2;
  // @gotags: json:"_from,omitempty"
  string from = 3;
  // @gotags: json:"_to,omitempty"
  string to = 4;
  // @gotags: json:"_rev,omitempty"
  string rev = 5;
  string owner = 6;
  repeated string read = 7;
  repeated string write = 8;
  // Main Data
  string name = 10;
  int32 confidence = 11;
  // Time Data
  int64 created_at = 20;
  int64 updated_at = 21;
  // Additional Data
  google.protobuf.Struct attributes = 30;
}

message Event {
  // Common data
  // @gotags: json:"_id,omitempty"
  string id = 1;
  // @gotags: json:"_key,omitempty"
  string key = 2;
  // @gotags: json:"_rev,omitempty"
  string rev = 3;
  string owner = 4;
  repeated string read = 5;
  repeated string write = 6;
  // Main Data
  string type = 10;
  LocationData location = 11;
  string title = 12;
  string description = 13;
  // Time data
  int64 happened_at = 20;
  int64 updated_at = 21;
  // Additional
  repeated string tags = 30;
  google.protobuf.Struct attributes = 31;
}

message Source {
  // Common data
  // @gotags: json:"_id,omitempty"
  string id = 1;
  // @gotags: json:"_key,omitempty"
  string key = 2;
  // @gotags: json:"_rev,omitempty"
  string rev = 3;
  string owner = 4;
  repeated string read = 5;
  repeated string write = 6;
  // Main Data
  string type = 10;
  string url = 11;
  string name = 12;
  string title = 13;
  string description = 14;
  int32 reliability = 15;
  // Time data
  int64 created_at = 20;
  int64 updated_at = 21;
  // Additional
  repeated string tags = 30;
  google.protobuf.Struct attributes = 31;
}

message Person {
  // Common data
  // @gotags: json:"_id,omitempty"
  string id = 1;
  // @gotags: json:"_key,omitempty"
  string key = 2;
  // @gotags: json:"_rev,omitempty"
  string rev = 3;
  string owner = 4;
  repeated string read = 5;
  repeated string write = 6;
  // Main Data
  string role = 10;
  string name = 11;
  string nationality = 12;
  // Time data
  int64 birth_date = 20;
  int64 updated_at = 21;
  // Additional
  repeated string tags = 30;
  repeated string aliases = 31;
  google.protobuf.Struct attributes = 32;
}

message Organization {
  // Common data
  // @gotags: json:"_id,omitempty"
  string id = 1;
  // @gotags: json:"_key,omitempty"
  string key = 2;
  // @gotags: json:"_rev,omitempty"
  string rev = 3;
  string owner = 4;
  repeated string read = 5;
  repeated string write = 6;
  // Main Data
  string type = 10;
  string name = 11;
  // Time data
  int64 founded_at = 20;
  int64 discovered_at = 21;
  int64 last_visited = 22;
  // Additional
  repeated string tags = 30;
  google.protobuf.Struct attributes = 31;
}

message Website {
  // Common data
  // @gotags: json:"_id,omitempty"
  string id = 1;
  // @gotags: json:"_key,omitempty"
  string key = 2;
  // @gotags: json:"_rev,omitempty"
  string rev = 3;
  string owner = 4;
  repeated string read = 5;
  repeated string write = 6;
  // Main Data
  string url = 10;
  string title = 11;
  string description = 12;
  // Time data
  int64 founded_at = 20;
  int64 discovered_at = 21;
  int64 last_visited = 22;
  // Additional
  repeated string tags = 30;
  google.protobuf.Struct attributes = 31;
}

message Entity {
  oneof entity {
    Source source = 1;
    Person person = 2;
    Organization organization = 3;
    Website website = 4;
    Event event = 5;
  }
}

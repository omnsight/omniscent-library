syntax = "proto3";

package model.v1;

option go_package = "github.com/omnsight/omniscent-library/gen/model/v1;model";

enum UserRole {
  USER_ROLE_USER_UNSPECIFIED = 0;
  USER_ROLE_ADMIN = 1;
}

message User {
  // basic info
  string id = 1;
  string username = 2;
  string bio = 3;
  string avatar_url = 4;
  // time data
  int64 created_at = 10;
  int64 updated_at = 11;
  // special
  UserRole role = 15;
}

enum CredentialProvider {
  CREDENTIAL_PROVIDER_LOCAL_UNSPECIFIED = 0;
  CREDENTIAL_PROVIDER_PHONE = 1;
  CREDENTIAL_PROVIDER_EMAIL = 2;
  CREDENTIAL_PROVIDER_WECHAT = 3;
}

message Credential {
  string user_id = 1;
  CredentialProvider provider = 2;
  string identifier = 3; // 如: phone="13800138000", email="a@b.com", wechat_openid="xxx"
  string secret = 4; // 密码哈希 / token 等（仅 local/email/phone 用）
  bool verified = 5; // 是否已验证（邮箱/手机）
  // time data
  int64 created_at = 10;
}

syntax = "proto3";

package geovision;

import "model/osint.proto";
import "google/api/annotations.proto";

option go_package = "github.com/bouncingmaxt/omniscent-library/gen/go/geovision;geovision";

// EventService provides operations for managing events
service EventService {
  rpc GetEvents(GetEventsRequest) returns (GetEventsResponse) {
    option (google.api.http) = {
      get: "/v1/events"
    };
  }

  rpc GetEvent(GetEventRequest) returns (GetEventResponse) {
    option (google.api.http) = {
      get: "/v1/events/{id}"
    };
  }

  rpc GetRelatedEvents(GetRelatedEventsRequest) returns (GetRelatedEventsResponse) {
    option (google.api.http) = {
      get: "/v1/events/{id}/related-events"
    };
  }

  rpc CreateEvent(CreateEventRequest) returns (CreateEventResponse) {
    option (google.api.http) = {
      post: "/v1/events"
      body: "event"
    };
  }

  rpc UpdateEvent(UpdateEventRequest) returns (UpdateEventResponse) {
    option (google.api.http) = {
      put: "/v1/events/{id}"
      body: "event"
    };
  }

  rpc DeleteEvent(DeleteEventRequest) returns (DeleteEventResponse) {
    option (google.api.http) = {
      delete: "/v1/events/{id}"
    };
  }
}

// Event messages
message GetEventsRequest {
  int64 start_time = 1;
  int64 end_time = 2;
}

message GetEventsResponse {
  repeated model.Event events = 1;
}

message GetEventRequest {
  string id = 1;
}

message GetEventResponse {
  model.Event event = 1;
  repeated model.Source sources = 2;
  repeated model.Person persons = 3;
  repeated model.Organization organizations = 4;
  repeated model.Website websites = 5;
}

message GetRelatedEventsRequest {
  string id = 1;
}

message GetRelatedEventsResponse {
  repeated model.Event events = 1;
}

message CreateEventRequest {
  model.Event event = 1;
}

message CreateEventResponse {
  model.Event event = 1;
}

message UpdateEventRequest {
  string id = 1;
  model.Event event = 2;
}

message UpdateEventResponse {
  model.Event event = 1;
}

message DeleteEventRequest {
  string id = 1;
}

message DeleteEventResponse {
  string message = 1;
}